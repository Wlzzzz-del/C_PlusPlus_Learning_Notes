# Webbench 源码解释
Webbench 可以分为三个部分
+ 解析URL并组装HTTP请求报文
+ 利用fork()模拟多个client发送报文
+ 利用管道进行进程间的通信，计算成功发送的各种数据(收到的字节数、速度等)

# GETOPTION部分
通过<getopt.h>中的getopt_long函数，可以获取命令行中用户所给的参数

# REQUEST部分
1. 检查用户输入的URL格式
+ 是否包含"://"?
+ URL是否过长？大于1500个字符。
+ URL是否太短？小于8个字符？
+ 前缀是否为"HTTP://"?
+ 结尾是否带有"/"?
+ 是否包含端口号？

2. 获取用户输入的host,如无端口号，则默认为HTTP端口号80
3. 根据用户选择的模式，组装REQUEST报文。

# SOCKET部分
1. 创建一个通信socket, 如果创建失败返回-1
2. 查询用户所给host对应的ip地址
3. 连接至ip地址
4. 返回socket编号

# 模拟连接部分
1. 使用fork创建多个子进程(个数用户指定)
2. 在子进程中创建socket并尝试发送报文
3. 如果用户指定'-f'，则进程计数++，并且关闭socket。(指定--force/-f 意味着不强制收到返回的消息 )
4. 如果用户未指定'-f',则等待服务器返回的消息，将收到的byte数累加，并且关闭socket.
5. 计算速度、byte数等结果。
